<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WeedTracker V63 – Charcoal Edition</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
</head>

<body>
  <div id="home" class="page active">
    <h2>🌿 WeedTracker V63</h2>
    <div class="home-grid">
      <button onclick="openPage('createTask')">🧾 Create Task</button>
      <button onclick="openPage('records')">📋 Records</button>
      <button onclick="openPage('inventory')">🧪 Chemical Inventory</button>
      <button onclick="openPage('batches')">🧉 Batches</button>
      <button onclick="openPage('mapping')">🗺️ Mapping</button>
      <button onclick="openPage('export')">📤 Export / Settings</button>
      <button onclick="clearData()">🧹 Clear Data</button>
    </div>
  </div>

  <!-- CREATE TASK -->
  <div id="createTask" class="page">
    <h3>Create Task</h3>
    <label>Job Type</label>
    <select id="jobType">
      <option>Inspection</option>
      <option>Spot Spray</option>
      <option>Road Spray</option>
    </select>

    <button onclick="getLocation()">📍 Get Location</button>
    <input id="location" placeholder="Latitude, Longitude"/>

    <label>Auto Name</label>
    <input id="autoJobName" readonly />

    <label>Council Job Number</label>
    <input id="councilJobNumber" placeholder="e.g. HC-12345" />

    <label>Date / Time</label>
    <input id="jobDateTime" type="datetime-local" />

    <h4>Weather Conditions</h4>
    <label>Temperature (°C)</label>
    <input id="temperature" type="number" />
    <label>Humidity (%)</label>
    <input id="humidity" type="number" />
    <label>Wind Speed (km/h)</label>
    <input id="windSpeed" type="number" />
    <label>Wind Direction (N/E/S/W + °)</label>
    <input id="windDirection" placeholder="e.g. NW 45°"/>

    <h4>Weeds & Batches</h4>
    <label>Weed Type</label>
    <select id="weedSelect"></select>

    <label>Batch Used</label>
    <select id="batchSelect"></select>

    <label>Notes</label>
    <textarea id="notes" placeholder="Enter job notes…"></textarea>

    <div class="button-row">
      <button onclick="saveTask()">💾 Save Task</button>
      <button onclick="markTask('Complete')">✅ Mark Complete</button>
      <button onclick="markTask('Incomplete')">🕓 Mark Incomplete</button>
      <button onclick="openPage('home')">🏠 Home</button>
    </div>
  </div>

  <!-- RECORDS -->
  <div id="records" class="page">
    <h3>Records</h3>
    <input id="recordSearch" placeholder="Search by road / weed / job type …" oninput="searchRecords()"/>
    <div id="recordList"></div>
    <button onclick="openPage('home')">🏠 Home</button>
  </div>

  <!-- CHEMICAL INVENTORY -->
  <div id="inventory" class="page">
    <h3>Chemical Inventory</h3>
    <a href="https://www.pesticides.gov.au/register/safety-data-sheets" target="_blank" class="sds-link">📎 View SDS Library</a>
    <div id="chemicalList"></div>
    <button onclick="openPage('home')">🏠 Home</button>
  </div>

  <!-- BATCHES -->
  <div id="batches" class="page">
    <h3>Batches</h3>
    <div id="batchList"></div>
    <button onclick="openPage('home')">🏠 Home</button>
  </div>

  <!-- MAPPING -->
  <div id="mapping" class="page">
    <h3>Mapping</h3>
    <div id="map"></div>
    <button onclick="locateUser()">📍 Locate Me</button>
    <button onclick="filterMap()">🔍 Filter Map</button>
    <button onclick="openPage('home')">🏠 Home</button>
  </div>

  <!-- EXPORT -->
  <div id="export" class="page">
    <h3>Export / Settings</h3>
    <button onclick="exportData()">📦 Export All Data</button>
    <button onclick="clearData()">🧹 Clear Local Data</button>
    <button onclick="openPage('home')">🏠 Home</button>
  </div>

  <script src="apps.js"></script>
  <script src="storage.js"></script>
  <script src="extras.js"></script>
  <script src="batches.js"></script>
</body>
</html>
