<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WeedTracker V56 Pilot</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
  <div id="splash">
    <div class="logo">WeedTracker V56 Pilot</div>
    <div class="sub">Loading secure data…</div>
  </div>

  <header id="topbar">
    <div class="brand">WeedTracker V56 Pilot</div>
    <button id="homeBtn" class="pill">Home</button>
  </header>

  <main id="view">
    <!-- Home -->
    <section id="home" class="screen active">
      <div class="grid">
        <button class="card" data-target="createTask">Create Task</button>
        <button class="card" data-target="records">Records</button>
        <button class="card" data-target="inventory">Chemical Inventory</button>
        <button class="card" data-target="batches">Batches</button>
        <button class="card" data-target="procurement">Procurement List</button>
        <button class="card" data-target="mapping">Mapping</button>
        <button class="card" data-target="settings">Settings</button>
      </div>
    </section>

    <!-- Create Task -->
    <section id="createTask" class="screen">
      <h2>Create Task</h2>

      <div class="block">
        <div class="block-title">1. Task Type</div>
        <select id="taskType">
          <option>Inspection</option>
          <option>Spot Spray</option>
          <option>Road Spray</option>
        </select>
      </div>

      <div class="block">
        <div class="block-title">2. Location</div>
        <div class="row">
          <button id="locateBtn" class="pill">Locate Me</button>
          <span id="locRoad" class="muted"></span>
        </div>
      </div>

      <div class="block">
        <div class="block-title">3. Auto Name & Council No</div>
        <div class="row gap">
          <button id="autoNameBtn" class="pill">Auto-generate Name</button>
          <input id="jobName" placeholder="Job name" />
        </div>
        <input id="councilNum" placeholder="Council job number (optional)" />
      </div>

      <div class="block" id="roadTrackBlock" style="display:none">
        <div class="block-title">4. Roadside Tracking</div>
        <div class="row gap">
          <button id="startTrack" class="pill">Start Tracking</button>
          <button id="stopTrack" class="pill warn">Stop Tracking</button>
          <span id="trackStatus" class="muted">Not started</span>
        </div>
      </div>

      <div class="grid two">
        <div class="block">
          <div class="block-title">5. Date</div>
          <input type="date" id="jobDate">
        </div>
        <div class="block">
          <div class="block-title">Start / Finish Time</div>
          <div class="row gap">
            <input type="time" id="startTime">
            <input type="time" id="endTime">
          </div>
        </div>
      </div>

      <div class="grid two">
        <div class="block">
          <div class="block-title">6. Weed</div>
          <select id="weedSelect"></select>
        </div>
        <div class="block">
          <div class="block-title">7. Batch</div>
          <select id="batchSelect"></select>
        </div>
      </div>

      <div class="grid two">
        <div class="block">
          <div class="block-title">8. Weather</div>
          <div class="grid two tight">
            <label class="lbl">Temp (°C)<input id="temp" type="number" inputmode="decimal"></label>
            <label class="lbl">Wind (km/h)<input id="wind" type="number" inputmode="decimal"></label>
            <label class="lbl">Wind Dir<input id="windDir" placeholder="N/NE/E/…"></label>
            <label class="lbl">Humidity %<input id="humidity" type="number" inputmode="decimal"></label>
          </div>
        </div>
        <div class="block">
          <div class="block-title">9. Photo</div>
          <input id="photoFile" type="file" accept="image/*">
        </div>
      </div>

      <div class="block">
        <div class="block-title">10. Notes</div>
        <textarea id="notes" rows="3" placeholder="Add notes…"></textarea>
      </div>

      <div class="grid two">
        <div class="block">
          <div class="block-title">11. Reminder (weeks)</div>
          <select id="reminderWeeks"></select>
        </div>
        <div class="block">
          <div class="block-title">12. Status</div>
          <div class="row gap">
            <label class="chip"><input type="radio" name="status" value="Complete"> Complete</label>
            <label class="chip"><input type="radio" name="status" value="Incomplete" checked> Incomplete</label>
            <label class="chip"><input type="radio" name="status" value="Draft"> Draft</label>
          </div>
        </div>
      </div>

      <div class="row gap end">
        <button id="saveDraft" class="pill">Save Draft</button>
        <button id="saveTask" class="pill primary">Save Task</button>
      </div>
    </section>

    <!-- Records -->
    <section id="records" class="screen">
      <h2>Records</h2>
      <div class="filters">
        <div class="grid three tight">
          <label class="lbl">Text Search<input id="recSearch" placeholder="Street / name / council"></label>
          <label class="lbl">From<input type="date" id="recFrom"></label>
          <label class="lbl">To<input type="date" id="recTo"></label>
        </div>
        <div class="row gap wrap">
          <label class="chip"><input type="checkbox" id="fInspection" checked> Inspection</label>
          <label class="chip"><input type="checkbox" id="fSpot" checked> Spot</label>
          <label class="chip"><input type="checkbox" id="fRoad" checked> Road</label>
          <label class="chip"><input type="checkbox" id="fComplete" checked> Complete</label>
          <label class="chip"><input type="checkbox" id="fIncomplete" checked> Incomplete</label>
          <label class="chip"><input type="checkbox" id="fDraft" checked> Draft</label>
        </div>
      </div>
      <div id="recordsList" class="list"></div>
    </section>

    <!-- Batches -->
    <section id="batches" class="screen">
      <h2>Batches</h2>
      <div class="row gap">
        <button id="newBatch" class="pill primary">Create Batch</button>
      </div>
      <div id="batchList" class="list"></div>
    </section>

    <!-- Inventory -->
    <section id="inventory" class="screen">
      <h2>Chemical Inventory</h2>
      <div class="row gap">
        <button id="addChem" class="pill">Add Chemical</button>
        <button id="openSDS" class="pill">SDS Portal</button>
      </div>
      <div id="chemList" class="list"></div>
    </section>

    <!-- Procurement -->
    <section id="procurement" class="screen">
      <h2>Procurement List</h2>
      <div id="procList" class="list"></div>
    </section>

    <!-- Mapping -->
    <section id="mapping" class="screen">
      <h2>Mapping</h2>
      <div class="filters">
        <div class="grid three tight">
          <label class="lbl">From<input type="date" id="mapFrom"></label>
          <label class="lbl">To<input type="date" id="mapTo"></label>
          <label class="lbl">Type
            <select id="mapType">
              <option value="All">All</option>
              <option value="Inspection">Inspection</option>
              <option value="Spot Spray">Spot Spray</option>
              <option value="Road Spray">Road Spray</option>
            </select>
          </label>
        </div>
      </div>
      <div id="map"></div>
    </section>

    <!-- Settings -->
    <section id="settings" class="screen">
      <h2>Settings</h2>
      <div class="grid two">
        <div class="block">
          <div class="block-title">Account</div>
          <label class="lbl">Email (saved locally)
            <input id="accountEmail" placeholder="you@outlook.com">
          </label>
          <button id="saveAccount" class="pill">Save</button>
        </div>
        <div class="block">
          <div class="block-title">Data</div>
          <div class="row gap wrap">
            <button id="exportBtn" class="pill">Export JSON</button>
            <button id="clearBtn" class="pill warn">Clear All Data</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <div id="spinner"><div class="lds-dual-ring"></div></div>

  <script src="storage.js"></script>
  <script src="extras.js"></script>
  <script src="apps.js"></script>
</body>
</html>
