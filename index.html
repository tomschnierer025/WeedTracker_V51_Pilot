<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>WeedTracker V60 Final Pilot</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="🌿" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
</head>
<body>

<!-- Splash -->
<div id="splash" class="splash">
  <h1>🌿 WeedTracker V60 Pilot</h1>
</div>

<!-- Spinner -->
<div id="spinner" class="spinner"></div>

<!-- HOME -->
<section id="home" class="screen active">
  <h1>🌿 WeedTracker V60</h1>
  <div class="home-grid">
    <button data-target="createTask" class="home-btn">🧾 Create Task</button>
    <button data-target="records" class="home-btn">📋 Records</button>
    <button data-target="inventory" class="home-btn">🧪 Chemical Inventory</button>
    <button data-target="batches" class="home-btn">🧴 Batches</button>
    <button data-target="procurement" class="home-btn">🛒 Procurement List</button>
    <button data-target="mapping" class="home-btn">🗺️ Mapping</button>
    <button data-target="settings" class="home-btn">⚙️ Settings</button>
  </div>
</section>

<!-- CREATE TASK -->
<section id="createTask" class="screen">
  <h2>🧾 Create Task</h2>

  <label>Task Type</label>
  <select id="taskType">
    <option>Inspection</option>
    <option>Spot Spray</option>
    <option>Road Spray</option>
  </select>

  <label>Locate Location</label>
  <button id="locateBtn" class="pill">📍 Locate Me</button>
  <div id="locRoad" class="subtext"> – </div>

  <label>Auto Generate Job Name</label>
  <button id="autoNameBtn" class="pill">🔠 Auto Name</button>
  <input id="jobName" placeholder="Job Name"/>

  <label>Date (DD-MM-YYYY)</label>
  <input id="jobDate" type="date"/>

  <label>Start Time</label>
  <input id="startTime" type="time"/>
  <label>Finish Time</label>
  <input id="endTime" type="time"/>

  <label>Weed Type</label>
  <select id="weedSelect"></select>

  <label>Batch Used</label>
  <select id="batchSelect"></select>

  <label>Weather</label>
  <div class="row gap">
    <button id="autoWeatherBtn" class="pill">☁️ Auto Weather</button>
    <span id="wxUpdated" class="subtext"></span>
  </div>
  <div class="grid four tight">
    <div><small>Temp °C</small><input id="temp" /></div>
    <div><small>Wind km/h</small><input id="wind" /></div>
    <div><small>Dir (° + N/E/S/W)</small><input id="windDir" /></div>
    <div><small>Humidity %</small><input id="humidity" /></div>
  </div>

  <label>Upload Photo</label>
  <input id="photoInput" type="file" accept="image/*"/>
  <img id="photoPreview" style="display:none;max-width:100%;border-radius:8px;margin:.5rem 0"/>

  <label>Reminder (weeks)</label>
  <select id="reminderWeeks"></select>

  <label>Notes</label>
  <textarea id="notes" rows="3" placeholder="Notes …"></textarea>

  <div id="roadTrackBlock" style="display:none;margin-top:.5rem;">
    <label>Roadside Tracking</label>
    <div class="row gap">
      <button id="startTrack" class="pill">▶️ Start</button>
      <button id="stopTrack" class="pill warn">⏹️ Stop</button>
      <span id="trackStatus" class="subtext">Idle</span>
    </div>
  </div>

  <div class="row gap" style="margin-top:1rem;">
    <button id="saveTask" class="pill">💾 Save Task</button>
    <button id="saveDraft" class="pill">🗂️ Save as Draft</button>
  </div>

  <button class="home-btn back">🏠 Home</button>
</section>

<!-- RECORDS -->
<section id="records" class="screen">
  <h2>📋 Records</h2>
  <input id="recSearch" placeholder="Search …"/>
  <div class="grid three tight">
    <div><small>From</small><input id="recFrom" type="date"/></div>
    <div><small>To</small><input id="recTo" type="date"/></div>
    <div><small>Type</small>
      <select id="recType">
        <option>All</option>
        <option>Inspection</option>
        <option>Spot Spray</option>
        <option>Road Spray</option>
      </select>
    </div>
  </div>
  <div class="row gap">
    <button id="recSearchBtn" class="pill">Search</button>
    <button id="recResetBtn" class="pill warn">Reset</button>
  </div>
  <div id="recordsList"></div>
  <button class="home-btn back">🏠 Home</button>
</section>

<!-- BATCHES -->
<section id="batches" class="screen">
  <h2>🧴 Batches</h2>
  <div class="grid two tight">
    <div><small>From</small><input id="batFrom" type="date"/></div>
    <div><small>To</small><input id="batTo" type="date"/></div>
  </div>
  <div class="row gap">
    <button id="batSearchBtn" class="pill">Search</button>
    <button id="batResetBtn" class="pill warn">Reset</button>
    <button id="newBatch" class="pill">➕ New Batch</button>
  </div>
  <div id="batchList"></div>
  <button class="home-btn back">🏠 Home</button>
</section>

<!-- INVENTORY -->
<section id="inventory" class="screen">
  <h2>🧪 Chemical Inventory</h2>
  <button id="addChem" class="pill">➕ Add Chemical</button>
  <div id="chemList"></div>

  <!-- Edit sheet -->
  <div id="chemEditSheet" class="sheet">
    <h3>Edit Chemical</h3>
    <label>Name</label><input id="ce_name"/>
    <label>Active Ingredient</label><input id="ce_active"/>
    <label>Size</label><input id="ce_size" type="number"/>
    <label>Unit (L/mL/g/kg)</label><input id="ce_unit"/>
    <label>Containers</label><input id="ce_count" type="number"/>
    <label>Threshold</label><input id="ce_threshold" type="number"/>
    <div class="row gap">
      <button id="ce_save" class="pill">💾 Save</button>
      <button id="ce_cancel" class="pill warn">✖️ Cancel</button>
    </div>
  </div>
  <button class="home-btn back">🏠 Home</button>
</section>

<!-- PROCUREMENT -->
<section id="procurement" class="screen">
  <h2>🛒 Procurement List</h2>
  <ul id="procList"></ul>
  <button class="home-btn back">🏠 Home</button>
</section>

<!-- MAPPING -->
<section id="mapping" class="screen">
  <h2>🗺️ Mapping</h2>
  <div class="grid three tight">
    <div><small>From</small><input id="mapFrom" type="date"/></div>
    <div><small>To</small><input id="mapTo" type="date"/></div>
    <div><small>Type</small>
      <select id="mapType">
        <option>All</option>
        <option>Inspection</option>
        <option>Spot Spray</option>
        <option>Road Spray</option>
      </select>
    </div>
  </div>
  <input id="mapWeed" placeholder="Weed Name …"/>
  <div class="row gap">
    <button id="mapSearchBtn" class="pill">Search</button>
    <button id="mapResetBtn" class="pill warn">Reset</button>
  </div>
  <div id="map" style="height:60vh;border-radius:8px;margin-top:.5rem;"></div>
  <button class="home-btn back">🏠 Home</button>
</section>

<!-- SETTINGS -->
<section id="settings" class="screen">
  <h2>⚙️ Settings & Data</h2>
  <label>Account Email</label>
  <input id="accountEmail" placeholder="Email"/>
  <div class="row gap">
    <button id="saveAccount" class="pill">💾 Save</button>
    <button id="exportBtn" class="pill">⬇️ Export Data</button>
    <button id="restoreBtn" class="pill">♻️ Restore Backup</button>
    <button id="clearBtn" class="pill warn">🗑️ Clear All</button>
  </div>
  <button class="home-btn back">🏠 Home</button>
</section>

<script src="extras.js"></script>
<script src="storage.js"></script>
<script src="apps.js"></script>
</body>
</html>
