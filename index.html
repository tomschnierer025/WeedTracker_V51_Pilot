<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WeedTracker V56 Light</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>

  <!-- Splash -->
  <div id="splash" class="screen active">
    <div class="center">
      <h1>🌿 WeedTracker V56 Pilot</h1>
      <p>Loading...</p>
    </div>
  </div>

  <!-- Spinner -->
  <div id="spinner" class="spinner">Loading...</div>

  <!-- Home -->
  <div id="home" class="screen">
    <h2>🏠 Home</h2>
    <div class="grid buttons">
      <button data-target="createTask" class="tile">🧾 Create Task</button>
      <button data-target="records" class="tile">📚 Records</button>
      <button data-target="batches" class="tile">🧪 Batches</button>
      <button data-target="inventory" class="tile">🧴 Chemical Inventory</button>
      <button data-target="procurement" class="tile">🛒 Procurement List</button>
      <button data-target="mapping" class="tile">🗺️ Mapping</button>
      <button data-target="settings" class="tile">⚙️ Settings</button>
    </div>
  </div>

  <!-- Create Task -->
  <div id="createTask" class="screen">
    <button id="homeBtn" class="back">⬅ Home</button>
    <h2>🧾 Create Task</h2>

    <label>Task Type:</label>
    <select id="taskType">
      <option>Inspection</option>
      <option>Spot Spray</option>
      <option>Road Spray</option>
    </select>

    <label>Job Name:</label>
    <input id="jobName" placeholder="Auto or manual" />
    <button id="autoNameBtn" class="pill">Auto-Generate Name</button>

    <label>Council No.:</label>
    <input id="councilNum" placeholder="Optional" />

    <label>Link to Inspection ID (optional):</label>
    <input id="linkInspectionId" placeholder="Enter previous inspection ID" />

    <div class="group">
      <label>Location:</label>
      <div class="row gap">
        <button id="locateBtn" class="pill">📍 Locate</button>
        <span id="locRoad">No location yet</span>
      </div>
    </div>

    <div class="group">
      <label>Date:</label>
      <input id="jobDate" type="date" />
      <label>Start:</label><input id="startTime" type="time" />
      <label>Finish:</label><input id="endTime" type="time" />
    </div>

    <div class="group">
      <label>Weather:</label>
      <div class="grid two tight">
        <input id="temp" placeholder="Temp °C" />
        <input id="wind" placeholder="Wind km/h" />
        <input id="windDir" placeholder="Direction °" />
        <input id="humidity" placeholder="Humidity %" />
      </div>
      <button id="autoWeatherBtn" class="pill">☁️ Auto Weather</button>
      <div id="wxUpdated" class="tiny"></div>
    </div>

    <div id="roadTrackBlock" class="group">
      <label>Roadside Tracking:</label>
      <div class="row gap">
        <button id="startTrack" class="pill">▶ Start Tracking</button>
        <button id="stopTrack" class="pill warn">⏹ Stop Tracking</button>
      </div>
      <small id="trackStatus">Idle</small>
    </div>

    <label>Weed:</label>
    <select id="weedSelect"></select>

    <label>Batch:</label>
    <select id="batchSelect"></select>

    <label>Reminder (weeks):</label>
    <select id="reminderWeeks"></select>

    <label>Notes:</label>
    <textarea id="notes" rows="3"></textarea>

    <div class="group">
      <label>Status:</label>
      <label><input type="radio" name="status" value="Incomplete" checked /> Incomplete</label>
      <label><input type="radio" name="status" value="Complete" /> Complete</label>
    </div>

    <div class="row gap">
      <button id="saveTask" class="pill">💾 Save</button>
      <button id="saveDraft" class="pill">📝 Save as Draft</button>
    </div>
  </div>

  <!-- Records -->
  <div id="records" class="screen">
    <button id="homeBtn" class="back">⬅ Home</button>
    <h2>📚 Records</h2>

    <div class="filters">
      <input id="recSearch" placeholder="Search by name, weed, etc." />
      <input id="recFrom" type="date" />
      <input id="recTo" type="date" />
      <div class="row wrap small">
        <label><input id="fInspection" type="checkbox" checked /> Inspection</label>
        <label><input id="fSpot" type="checkbox" checked /> Spot Spray</label>
        <label><input id="fRoad" type="checkbox" checked /> Road Spray</label>
        <label><input id="fComplete" type="checkbox" checked /> Complete</label>
        <label><input id="fIncomplete" type="checkbox" checked /> Incomplete</label>
        <label><input id="fDraft" type="checkbox" checked /> Draft</label>
      </div>
      <div class="row gap">
        <button id="recSearchBtn" class="pill">Search</button>
        <button id="recResetBtn" class="pill warn">Reset</button>
      </div>
    </div>

    <div id="recordsList" class="list"></div>
  </div>

  <!-- Batches -->
  <div id="batches" class="screen">
    <button id="homeBtn" class="back">⬅ Home</button>
    <h2>🧪 Batches</h2>

    <div class="filters">
      <input id="batFrom" type="date" />
      <input id="batTo" type="date" />
      <div class="row gap">
        <button id="batSearchBtn" class="pill">Search</button>
        <button id="batResetBtn" class="pill warn">Reset</button>
      </div>
    </div>

    <button id="newBatch" class="pill">➕ New Batch</button>
    <div id="batchList" class="list"></div>
  </div>

  <!-- Inventory -->
  <div id="inventory" class="screen">
    <button id="homeBtn" class="back">⬅ Home</button>
    <h2>🧴 Chemical Inventory</h2>
    <button id="addChem" class="pill">➕ Add Chemical</button>
    <div id="chemList" class="list"></div>
  </div>

  <!-- Procurement -->
  <div id="procurement" class="screen">
    <button id="homeBtn" class="back">⬅ Home</button>
    <h2>🛒 Procurement List</h2>
    <p>Low-stock items from chemicals will appear here automatically.</p>
    <ul id="procList"></ul>
  </div>

  <!-- Mapping -->
  <div id="mapping" class="screen">
    <button id="homeBtn" class="back">⬅ Home</button>
    <h2>🗺️ Mapping</h2>

    <div class="filters">
      <input id="mapFrom" type="date" />
      <input id="mapTo" type="date" />
      <select id="mapType">
        <option>All</option>
        <option>Inspection</option>
        <option>Spot Spray</option>
        <option>Road Spray</option>
      </select>
      <div class="row gap">
        <button id="mapSearchBtn" class="pill">Search</button>
        <button id="mapResetBtn" class="pill warn">Reset</button>
      </div>
    </div>

    <div id="map" style="height:70vh;border:1px solid #ccc;margin-top:.5rem;"></div>
  </div>

  <!-- Settings -->
  <div id="settings" class="screen">
    <button id="homeBtn" class="back">⬅ Home</button>
    <h2>⚙️ Settings</h2>
    <label>Account Email (for future sync):</label>
    <input id="accountEmail" placeholder="your@email.com" />
    <button id="saveAccount" class="pill">Save</button>

    <div class="group">
      <button id="exportBtn" class="pill">⬇ Export Data</button>
      <button id="clearBtn" class="pill warn">🗑 Clear Data</button>
      <button id="openSDS" class="pill">📄 Open SDS Portal</button>
    </div>
  </div>

  <script src="apps.js"></script>
</body>
</html>
