<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WeedTracker V55 Pilot</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
  <div id="splash">🌿 WeedTracker V55 Pilot</div>

  <!-- HOME PAGE -->
  <div id="view-home" class="view show">
    <h1 class="hdr">WeedTracker V55 Pilot</h1>
    <div class="grid">
      <button id="btn-create" class="homebtn">🧾 Create Task</button>
      <button id="btn-records" class="homebtn">📂 Records</button>
      <button id="btn-batches" class="homebtn">🧪 Batches</button>
      <button id="btn-inventory" class="homebtn">💧 Chemical Inventory</button>
      <button id="btn-procurement" class="homebtn">🛒 Procurement List</button>
      <button id="btn-map" class="homebtn">🗺️ Mapping</button>
      <button id="btn-settings" class="homebtn">⚙️ Settings / Data</button>
    </div>
  </div>

  <!-- CREATE TASK -->
  <div id="view-create" class="view">
    <h2>Create Task</h2>
    <label>Type of Job
      <select id="task-type">
        <option>Inspection</option>
        <option>Spot Spray</option>
        <option>Road Spray</option>
      </select>
    </label>
    <label>Date <input id="task-date" type="date" /></label>
    <div class="row2">
      <button id="btn-locate" class="btn">📍 Locate Me</button>
      <input id="task-road" placeholder="Road Name / Location" />
    </div>
    <label>Auto Job Name
      <input id="auto-name" readonly />
      <button id="btn-autoname" class="btn sm">Auto</button>
    </label>
    <label>Council Job No <input id="council-job" placeholder="Optional" /></label>
    <label>Weed Type
      <select id="weed-select">
        <option value="">Select Weed</option>
      </select>
    </label>
    <label>Attach Photo <input id="attach-photo" type="file" accept="image/*" /></label>

    <fieldset class="wx">
      <legend>Weather Data (auto)</legend>
      <div class="wxrow">
        <label>Temp (°C)<input id="wx-temp" readonly /></label>
        <label>Humidity (%)<input id="wx-humidity" readonly /></label>
      </div>
      <div class="wxrow">
        <label>Wind Speed (km/h)<input id="wx-wind-speed" readonly /></label>
        <label>Wind Dir (° / Compass)<input id="wx-wind-dir" readonly /></label>
      </div>
    </fieldset>

    <label>Start Time <input id="task-start-time" type="time" /></label>
    <label>End Time <input id="task-end-time" type="time" /></label>

    <div id="row-tracking" style="display:none">
      <button id="btn-start-track" class="btn">▶ Start Tracking</button>
      <button id="btn-stop-track" class="btn">⏹ Stop Tracking</button>
    </div>

    <div class="row2">
      <label><input type="radio" id="task-complete" name="status" /> Complete</label>
      <label><input type="radio" id="task-incomplete" name="status" checked /> Incomplete</label>
    </div>

    <label>Link Existing Job <input id="link-job" placeholder="Enter Job IDs (optional)" /></label>
    <label>Reminder (weeks)
      <input id="rem-weeks" type="number" min="1" max="52" value="4" />
    </label>

    <div class="grp">
      <button id="btn-save" class="btn green">💾 Save</button>
      <button id="btn-draft" class="btn gray">📝 Save as Draft</button>
      <button class="btn home-link">🏠 Home</button>
    </div>
  </div>

  <!-- RECORDS -->
  <div id="view-records" class="view">
    <h2>Records</h2>
    <div class="filters">
      <label>Type<select id="rec-type">
        <option>All</option><option>Inspection</option><option>Spot Spray</option><option>Road Spray</option>
      </select></label>
      <label>Status<select id="rec-status">
        <option>All</option><option>Complete</option><option>Incomplete</option><option>Draft</option>
      </select></label>
      <label>From<input id="rec-from" type="date" /></label>
      <label>To<input id="rec-to" type="date" /></label>
      <label>Weed<input id="rec-weed" /></label>
      <label>Council No<input id="rec-council" /></label>
      <div class="grp">
        <button id="rec-apply" class="btn">Apply</button>
        <button id="rec-reset" class="btn gray">Reset</button>
      </div>
    </div>
    <ul id="records-list" class="list"></ul>
    <button class="btn home-link">🏠 Home</button>
  </div>

  <!-- BATCHES -->
  <div id="view-batches" class="view">
    <h2>Batches</h2>
    <div class="filters">
      <label>From<input id="bat-from" type="date" /></label>
      <label>To<input id="bat-to" type="date" /></label>
      <div class="grp">
        <button id="bat-apply" class="btn">Apply</button>
        <button id="bat-reset" class="btn gray">Reset</button>
      </div>
    </div>
    <ul id="batches-list" class="list"></ul>
    <div class="grp">
      <button id="btn-new-batch" class="btn">➕ New Batch</button>
      <button class="btn home-link">🏠 Home</button>
    </div>
  </div>

  <!-- INVENTORY -->
  <div id="view-inventory" class="view">
    <h2>Chemical Inventory</h2>
    <ul id="inv-list" class="list"></ul>
    <button id="btn-add-chemical" class="btn">➕ Add Chemical</button>
    <button class="btn home-link">🏠 Home</button>
  </div>

  <!-- PROCUREMENT -->
  <div id="view-procurement" class="view">
    <h2>Procurement List</h2>
    <ul id="proc-list" class="list"></ul>
    <button class="btn home-link">🏠 Home</button>
  </div>

  <!-- MAP -->
  <div id="view-map" class="view">
    <h2>Mapping</h2>
    <div class="filters">
      <label>Type<select id="map-type">
        <option>All</option><option>Inspection</option><option>Spot Spray</option><option>Road Spray</option>
      </select></label>
      <label>From<input id="map-from" type="date" /></label>
      <label>To<input id="map-to" type="date" /></label>
      <div class="grp">
        <button id="map-apply" class="btn">Apply</button>
        <button id="map-reset" class="btn gray">Reset</button>
      </div>
    </div>
    <div id="map" class="mapbox"></div>
    <button class="btn home-link">🏠 Home</button>
  </div>

  <!-- SETTINGS -->
  <div id="view-settings" class="view">
    <h2>Settings / Data</h2>
    <p id="whoami"></p>
    <div class="grp">
      <button id="btn-export" class="btn">⬇️ Export Data</button>
      <button id="btn-clear" class="btn gray">🧹 Clear Local</button>
      <button id="btn-backup-now" class="btn">☁️ Backup Now</button>
      <button class="btn home-link">🏠 Home</button>
    </div>
  </div>

  <script type="module" src="apps.js"></script>
</body>
</html>
