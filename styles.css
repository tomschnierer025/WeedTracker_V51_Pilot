:root{
  --green:#0c7d2b;
  --green-d:#0a5f22;
  --bg:#f4f7f4;
  --card:#fff;
  --muted:#5a745a;
  --border:#d9e6d9;
  --warn:#b53a2f;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;background:var(--bg);color:#0b2e0b}
h2{margin:.2rem 0 1rem}
h3,h4{margin:.4rem 0}

.app-header{
  position:sticky;top:0;z-index:50;
  display:flex;align-items:center;justify-content:space-between;
  padding:.6rem .9rem;background:linear-gradient(90deg,#0c7d2b,#17a543);color:#fff
}
.app-header .brand{font-weight:800}
.app-header .ver{opacity:.9;font-weight:700}

.home-btn{background:rgba(255,255,255,.15);border:none;border-radius:10px;color:#fff;padding:.5rem .75rem;font-weight:700}

.splash{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--bg);z-index:999;transition:opacity .3s}
.splash.hide{opacity:0;pointer-events:none}
.splash .logo{font-size:2.2rem;margin-bottom:.6rem}

.screen{display:none;padding:12px}
.screen.active{display:block}

.home-grid{display:grid;grid-template-columns:1fr;gap:10px}
.home-tile{display:flex;align-items:center;gap:.6rem;justify-content:flex-start;background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,.04);padding:14px 16px;color:#143b14;font-weight:800}
.home-tile span{font-size:1.3rem}

.grid{display:grid;gap:10px}
.grid.two{grid-template-columns:1fr 1fr}
.grid.three{grid-template-columns:1fr 1fr 1fr}
.grid.four{grid-template-columns:repeat(4,1fr)}
.grid.two .field,.grid.three .field,.grid.four .field{min-width:0}

.row{display:flex;align-items:center}
.end{justify-content:flex-end}
.wrap{flex-wrap:wrap}
.gap{gap:8px}

.card{background:var(--card);border:1px solid var(--border);border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,.04)}
.p{padding:12px}

.field{display:flex;flex-direction:column;gap:6px}
.field>label{font-weight:800;color:#183b18}
input,select,textarea{width:100%;padding:10px;border:1px solid var(--border);border-radius:10px;background:#fff}

.pill{background:var(--green);color:#fff;border:none;border-radius:12px;padding:10px 14px;font-weight:800}
.pill.warn{background:var(--warn)}
.pill.strong{box-shadow:0 2px 8px rgba(12,125,43,.25)}

.list{display:flex;flex-direction:column;gap:8px}
.item{padding:10px 12px}

.filters .filter{min-width:210px}

.map{height:60vh;border:1px solid var(--border);border-radius:12px;background:#eef5ee}

.muted{color:var(--muted);font-size:.9rem}

.sheet{position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:1000;display:flex;align-items:flex-end}
.sheet-body{background:#fff;border-radius:14px 14px 0 0;padding:12px;width:100%;max-height:85vh;overflow:auto}
.sheet-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}

.overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:1200;background:rgba(0,0,0,.45)}
.overlay-box{background:#fff;border:1px solid var(--border);border-radius:14px;padding:16px 18px;box-shadow:0 10px 26px rgba(0,0,0,.2);min-width:240px;display:flex;flex-direction:column;gap:10px;align-items:center}
.overlay-text{color:var(--green);font-weight:900}

.spinner-lg{width:34px;height:34px;border:4px solid #cfe9cf;border-top-color:var(--green);border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

.backdrop{position:fixed;inset:0;background:rgba(0,0,0,.35);z-index:1100}

.warn{background:#fff8f7;border:1px solid #f0b3ac;color:#842a21;padding:10px;border-radius:10px}

.chem-rows{display:flex;flex-direction:column;gap:8px}
.chem-row{display:grid;grid-template-columns:1.2fr .9fr .8fr .9fr auto;gap:8px;background:#fbfdfb;border:1px solid var(--border);border-radius:10px;padding:8px}
.chem-row .calc{display:flex;align-items:center;font-weight:700;color:#204620}
.ring{font-size:18px}

#overlaySpinner[hidden],#backdrop[hidden]{display:none}
